#!/bin/sh

################################################################################
####################### persönliche Einstellungen ##############################
################################################################################
# Gewünschte Konsolen-Belegungen:
CONSOLE_KEYMAP="de"
#CONSOLE_KEYMAP=""		# leer für Standard-keymap (i.d.R. qwert)


# gewünschter Status für qwert
NUM_LOCK_STATUS="ON"
################################################################################
################################################################################
################################################################################


CONSOLE_KEYMAP=${1-$CONSOLE_KEYMAP}


if [ -n "$SSH_CONNECTION" ]; then
        echo -n "Dude, du bist in einer SSH-Session. Wie soll ich das "
        echo    "Tastaturlayout hier ändern?"
	exit 1
fi
if [ -z "$DISPLAY" ]; then
        echo -n "Um das Tastaturlayout auf der Textkonsole zu ändern, muss man"
        echo    " root-Rechte besitzen!"
	if [ $CONSOLE_KEYMAP ] ; then
		sudo loadkeys $CONSOLE_KEYMAP
	else
		sudo loadkeys -d
	fi
	if [ NUM_LOCK_STATUS="ON" ] ; then
		setleds +num
	else
		setleds -num
	fi
else
	xset r 51; xset r 94			# Modifier
	xset r 21; xset r 35; xset r 49		# tote Tasten (dead keys)
	setxkbmap de
	if [ NUM_LOCK_STATUS="ON" ] ; then
		numlockx on
	else
		numlockx off
	fi
fi

